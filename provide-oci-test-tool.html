<html>
    <head>
        <script type="text/javascript">
		
            function writeParameters(urlFullString) {
                
				var result = "";
				var url = urlFullString.split("?");
				if ( url.length < 2 ) {
					document.writeln("No parameters in URL: ");
					document.writeln(urlFullString);
					return result;
				} 
				var params = url[1].split("&");	
				document.writeln("<H1>List of GET parameters ver. 1.5</H1>");
				result = "<TABLE>";
                for ( i = 0; i < params.length; i++) {
					result = result + "<TR><TD style='padding: 5px'>";
					var paramNameValue = params[i].split("=");
					if (paramNameValue[0] == "password") {
						paramNameValue[1] = '*****';
					};
					result = result + paramNameValue[0] + "</TD><TD>=</TD><TD style='padding: 5px'>" + paramNameValue[1] + "</TD></TR>";
                    
                }
				result = result + "</TABLE>";
                return result;
            };

            function writePageContent() {
				var urlFullString = window.location.href;
                var parametersHTML = writeParameters(urlFullString);
				document.write(parametersHTML);
                document.getElementsByName("my-textarea")[0].value = comment;
            };

			function getInput(callback) {
				$('#somediv').html( "<input type='button' id='mybutton' name='Click Me'></input>" );
				$('#mybutton').click( function() { callback("result"); } );
			};

			function processInput (result) {
				alert(result);
			};

			
		
			function display() {
			alert('displayed');
			};
			
			function extractHookURL() {
				
				var urlFullString = window.location.href;
				var result = "";
				var url = urlFullString.split("?");
				if ( url.length < 2 ) {
					return "";
				} 
				var params = url[1].split("&");	
                for ( i = 0; i < params.length; i++) {
				var paramNameValue = params[i].split("=");
				if ( paramNameValue[0] == "hook_url") {
						return paramNameValue[1];
					};
	            };                
				
				return "";
				
			};
			
			function OnSubmitForm() {	
			  
				hookURL = extractHookURL();
				document.SUBMITFORM.action = hookURL;

			  return true;
			}
        </script>
    </head>
    <body onload="">
	
	<!--<button text="PressMe" onclick="getInput(processInput)"/>-->
     <FORM NAME="SUBMITFORM"
		ACTION=""
		METHOD="POST" onsubmit="OnSubmitForm();">
			<H1>Test OCI response ver 1.7 - dynamic hook_url<H1>
			<table>
				<tr>
					<TD>Param 1: </TD><TD><input name="PARAM1" value="Param 1"/></TD>
				</tr>
				<tr>
					<TD>Param 2: </TD><TD><input name="PARAM1" value="Param 2"/></TD>
				</tr>
				<tr>
					<TD>Param 3: </TD><TD><input name="PARAM1" value="Param 3"/></TD>
				</tr>
				<tr>
					<TD>userId: </TD><TD><input id="userId" name="userId" value="Adam" size="10"/></TD>
				</tr>
			</table>
	  <input type="submit" name="submit" value="Submit" onclick="{ document.SUBMITFORM.submit(); }" />
  	</FORM>

    </body>
</html>

